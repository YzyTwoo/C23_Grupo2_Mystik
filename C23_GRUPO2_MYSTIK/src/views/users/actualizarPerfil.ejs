<!-- head -->

<%- include('../partials/heads.ejs', {title: 'Actualizar Perfil'}) %>
<link rel="stylesheet" href="/stylesheets/editarUsuario.css">

<body>
    <!-- header -->
<%- include('../partials/headerProduct.ejs') %>
    <!-- validacion frontend -->
    <script src="/js/profileValidator.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.all.min.js"></script>

    <main class="main_edit">
        <form class="form_class" id="form-profile" action="/users/editar/<%=user.id%>?_method=PUT" method="post" enctype="multipart/form-data">
            <div class="forms_general" >

            <div class="form_nombre">
                <label class="label_form" for="nombre">Nombre:</label>
                <input type="text" class="form_input" id="validacion-nombre" name="nombre" value="<%= locals.user ? user.nombre : locals.old && old.nombre ? old.nombre : null %>">
                <p class="local_error" id="nombreErrors">  <%= locals.errors && errors.nombre ? errors.nombre.msg : null %> </p>
            </div>

            <div class="form_email">
                <label class="label_form" for="email">Email:</label>
                <input type="text" class="form_input" id="validacion-email"  name="email" value="<%= locals.user ? user.email : locals.old && old.email ? old.email : null %>">
                <p class="local_error" id="emailErrors" > <%= locals.errors && errors.email ? errors.email.msg : null %> </p>
            </div>

            <div class="form_telefono">
                <label class="label_form" for="telefono">Teléfono:</label>
                <input type="text" class="form_input" id="validacion-telefono"  name="telefono" value="<%= locals.user ? user.telefono : locals.old && old.telefono ? old.telefono : null %>">
                <p class="local_error" id="telefonoErrors"> <%= locals.errors && errors.telefono ? errors.telefono.msg : null %> </p>
            </div>

            <% if (locals.usuario && usuario.rol == 'admin') {%>
                <div class="form_rol">
                    <label class="label_form" for="rol">Rol</label>
                    <input type="text" id="rol" name="rol" class="form_input" value="<%= locals.user ? user.rol : locals.old && old.rol ? old.rol : null %>">
                    <p> <%= locals.errors && errors.rol ? errors.rol.msg : null %> </p>
                </div>
            <% } %>

            <div class="form_password">
                <label for="genero" class="label_form">Genero:</label>
                <select name="genero" id="genero" class="form_input">
                    <option value="masculino">Masculino</option>
                    <option value="femenino">Femenino</option>
                    <option value="Notiene">Prefiero no decirlo</option>
                </select>
            </div>
            <div class="form_password">
                <label for="nacimiento" class="label_form">Fecha de nacimiento:</label>
                <input name="nacimiento" id="nacimiento" class="form_input" type="date" multiple></input>
                <small class="text-danger d-flex">
                    <%= locals.errors && errors.nacimiento ? errors.nacimiento.msg : null %>
                </small>
            </div>

            <div class="form_password">
                <label class="label_form" for="password">Crear nueva contraseña:</label>
                <input type="password" class="form_input" id="contrasenia" name="contrasenia">
                <p class="local_error"> <%= locals.errors && errors.contrasenia ? errors.contrasenia.msg : null %> </p>
            </div>
            </div>

            <div class="form_imagen">
                <label class="label_form" for="image">Foto de perfil</label>
                <input type="file" class="form_input" name="image">
                <p><%= locals.errors && errors.image ? errors.image.msg : null %> </p>
            </div>

            <div class="div_submit">
                <button type="submit" class="update_perfil">Actualizar Perfil</button>
            </div>
        </form>
    </main>

    <%- include("../partials/footer.ejs") %>
</body>
</html>
